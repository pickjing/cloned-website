2025-09-20 01:05:45.663 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 01:05:45.690 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 9
}
2025-09-20 01:05:45.691 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 9
}
2025-09-20 01:05:45.691 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 9
}
2025-09-20 01:05:45.691 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 9
}
2025-09-20 01:05:55.851 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/names",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "2ef1b5d6-971f-4c1b-a72d-0aa2acbde523"
}
2025-09-20 01:05:55.853 [DEBUG] Cache miss
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "device_groups_names:",
  "cacheType": "long"
}
2025-09-20 01:05:55.853 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 9
}
2025-09-20 01:05:55.873 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 9
}
2025-09-20 01:05:55.874 [DEBUG] Cache set
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "device_groups_names:",
  "ttl": 3600,
  "cacheType": "long"
}
2025-09-20 01:05:55.877 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/names",
  "statusCode": 200,
  "responseTime": 26,
  "requestId": "2ef1b5d6-971f-4c1b-a72d-0aa2acbde523"
}
2025-09-20 01:36:58.090 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 01:36:58.099 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:36:58.099 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:36:58.099 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 16
}
2025-09-20 01:36:58.099 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:37:41.065 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "07e0e866-f731-40da-a291-4877333b131b"
}
2025-09-20 01:37:41.066 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "dtu",
  "sensorId": "DTU_1755937662576_iw32nv"
}
2025-09-20 01:37:41.067 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:37:41.073 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:37:41.075 [ERROR] Application error MB-RTU配置不存在
Error: MB-RTU配置不存在
    at DeviceData.getMBRTUConfig (/Users/xujing/Workspace/cloned-website/backend/src/models/deviceData.js:602:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/xujing/Workspace/cloned-website/backend/src/controllers/deviceController.js:359:20
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "07e0e866-f731-40da-a291-4877333b131b",
  "query": {},
  "params": {}
}
2025-09-20 01:37:41.077 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "statusCode": 500,
  "responseTime": 13,
  "requestId": "07e0e866-f731-40da-a291-4877333b131b"
}
2025-09-20 01:37:56.399 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "7096716c-e48c-4926-8402-84294293d70a"
}
2025-09-20 01:37:56.399 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "dtu",
  "sensorId": "DTU_1755937662576_iw32nv"
}
2025-09-20 01:37:56.399 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:37:56.400 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:37:56.401 [ERROR] Application error MB-RTU配置不存在
Error: MB-RTU配置不存在
    at DeviceData.getMBRTUConfig (/Users/xujing/Workspace/cloned-website/backend/src/models/deviceData.js:602:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/xujing/Workspace/cloned-website/backend/src/controllers/deviceController.js:359:20
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "7096716c-e48c-4926-8402-84294293d70a",
  "query": {},
  "params": {}
}
2025-09-20 01:37:56.401 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "statusCode": 500,
  "responseTime": 2,
  "requestId": "7096716c-e48c-4926-8402-84294293d70a"
}
2025-09-20 01:38:04.585 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "d62289da-64e0-405a-a69c-29479027e2f7"
}
2025-09-20 01:38:04.586 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "dtu",
  "sensorId": "DTU_1755937662576_iw32nv"
}
2025-09-20 01:38:04.586 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:38:04.586 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 16
}
2025-09-20 01:38:04.587 [ERROR] Application error MB-RTU配置不存在
Error: MB-RTU配置不存在
    at DeviceData.getMBRTUConfig (/Users/xujing/Workspace/cloned-website/backend/src/models/deviceData.js:602:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/xujing/Workspace/cloned-website/backend/src/controllers/deviceController.js:359:20
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "d62289da-64e0-405a-a69c-29479027e2f7",
  "query": {},
  "params": {}
}
2025-09-20 01:38:04.587 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "statusCode": 500,
  "responseTime": 2,
  "requestId": "d62289da-64e0-405a-a69c-29479027e2f7"
}
2025-09-20 01:39:27.071 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 01:39:27.077 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:27.077 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:27.078 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 17
}
2025-09-20 01:39:27.078 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:47.757 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "45c27c15-0803-458a-af94-ed0a46093731"
}
2025-09-20 01:39:47.758 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv"
}
2025-09-20 01:39:47.759 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:47.767 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:47.770 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "statusCode": 200,
  "responseTime": 14,
  "requestId": "45c27c15-0803-458a-af94-ed0a46093731"
}
2025-09-20 01:39:54.088 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/SENSOR_1755937682586_jiz5o9",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "1c2b5d3f-c47c-4c41-82cb-c717bb00df65"
}
2025-09-20 01:39:54.089 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "SENSOR_1755937682586_jiz5o9"
}
2025-09-20 01:39:54.089 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:54.090 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:39:54.091 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/SENSOR_1755937682586_jiz5o9",
  "statusCode": 200,
  "responseTime": 3,
  "requestId": "1c2b5d3f-c47c-4c41-82cb-c717bb00df65"
}
2025-09-20 01:40:00.320 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/SENSOR_1755937682586_jiz5o9",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "919e5b53-b2ed-436e-9b89-1e9b83e07a6a"
}
2025-09-20 01:40:00.322 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "SENSOR_1755937682586_jiz5o9",
  "data": {
    "function_code": "03读写",
    "collection_cycle": 5
  }
}
2025-09-20 01:40:00.322 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.338 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.338 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.340 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.340 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.341 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.341 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.349 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:00.349 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/SENSOR_1755937682586_jiz5o9",
  "statusCode": 200,
  "responseTime": 29,
  "requestId": "919e5b53-b2ed-436e-9b89-1e9b83e07a6a"
}
2025-09-20 01:40:05.015 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/SENSOR_1755937682586_jiz5o9",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "ac04f6d7-e9cd-41a8-822e-8bf3550393e3"
}
2025-09-20 01:40:05.015 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "SENSOR_1755937682586_jiz5o9"
}
2025-09-20 01:40:05.015 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:05.016 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:05.016 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/SENSOR_1755937682586_jiz5o9",
  "statusCode": 200,
  "responseTime": 1,
  "requestId": "ac04f6d7-e9cd-41a8-822e-8bf3550393e3"
}
2025-09-20 01:40:10.476 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "e4d9c4ec-b087-408f-b34c-a3260cd01a22"
}
2025-09-20 01:40:10.478 [DEBUG] Batch updating MB RTU configs
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "configCount": 2
}
2025-09-20 01:40:10.478 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.478 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.478 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "SENSOR_1755937682586_yeu8cu",
  "data": {
    "sensor_id": "SENSOR_1755937682586_yeu8cu",
    "function_code": "02只读",
    "collection_cycle": 3
  }
}
2025-09-20 01:40:10.479 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.479 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.479 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.480 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.480 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.480 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.480 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.482 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.482 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "SENSOR_1755937682586_urlem6",
  "data": {
    "sensor_id": "SENSOR_1755937682586_urlem6",
    "data_format": "32位浮点型数"
  }
}
2025-09-20 01:40:10.482 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.482 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.482 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.483 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.483 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.483 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.483 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.485 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:10.485 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/dtu/DTU_1755937662576_iw32nv",
  "statusCode": 200,
  "responseTime": 9,
  "requestId": "e4d9c4ec-b087-408f-b34c-a3260cd01a22"
}
2025-09-20 01:40:15.828 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/NONEXISTENT_SENSOR",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "9302574f-3861-49c0-bfb8-ece9cca3297a"
}
2025-09-20 01:40:15.829 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "NONEXISTENT_SENSOR",
  "data": {
    "function_code": "03读写"
  }
}
2025-09-20 01:40:15.829 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:15.829 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:15.830 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:15.830 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 17
}
2025-09-20 01:40:15.831 [ERROR] Application error 传感器不存在或不属于该DTU设备
Error: 传感器不存在或不属于该DTU设备
    at DeviceData.updateMBRTUConfig (/Users/xujing/Workspace/cloned-website/backend/src/models/deviceData.js:498:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/xujing/Workspace/cloned-website/backend/src/controllers/deviceController.js:330:20
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/NONEXISTENT_SENSOR",
  "method": "PUT",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "9302574f-3861-49c0-bfb8-ece9cca3297a",
  "body": {
    "function_code": "03读写"
  },
  "query": {},
  "params": {}
}
2025-09-20 01:40:15.831 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv/NONEXISTENT_SENSOR",
  "statusCode": 500,
  "responseTime": 3,
  "requestId": "9302574f-3861-49c0-bfb8-ece9cca3297a"
}
2025-09-20 01:42:30.798 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3b49e6cd-7f4d-4bf7-aded-1364a033a101"
}
2025-09-20 01:42:30.799 [ERROR] Application error 路径 /api/mb-rtu-config/DTU_1755937662576_iw32nv 不存在
Error: 路径 /api/mb-rtu-config/DTU_1755937662576_iw32nv 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3b49e6cd-7f4d-4bf7-aded-1364a033a101",
  "query": {},
  "params": {}
}
2025-09-20 01:42:30.799 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "statusCode": 404,
  "responseTime": 1,
  "requestId": "3b49e6cd-7f4d-4bf7-aded-1364a033a101"
}
2025-09-20 01:42:42.407 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "eae00ba9-68c1-4f86-97ed-77d9a9f31122"
}
2025-09-20 01:42:42.407 [ERROR] Application error 路径 /api/mb-rtu-config/DTU_1755937662576_iw32nv 不存在
Error: 路径 /api/mb-rtu-config/DTU_1755937662576_iw32nv 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "eae00ba9-68c1-4f86-97ed-77d9a9f31122",
  "query": {},
  "params": {}
}
2025-09-20 01:42:42.408 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "statusCode": 404,
  "responseTime": 1,
  "requestId": "eae00ba9-68c1-4f86-97ed-77d9a9f31122"
}
2025-09-20 01:42:49.474 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 01:42:49.480 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:42:49.481 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:42:49.481 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 18
}
2025-09-20 01:42:49.481 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:42:58.851 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "b59415ee-af71-40a2-8c20-4bc830e96fc0"
}
2025-09-20 01:42:58.853 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv"
}
2025-09-20 01:42:58.853 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:42:58.860 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:42:58.863 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "statusCode": 200,
  "responseTime": 11,
  "requestId": "b59415ee-af71-40a2-8c20-4bc830e96fc0"
}
2025-09-20 01:43:04.238 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "316c3789-4e1d-4c1e-ab2a-8f7790c9cbca"
}
2025-09-20 01:43:04.241 [DEBUG] Batch updating MB RTU configs
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "configCount": 1
}
2025-09-20 01:43:04.241 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.242 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.242 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "DTU_1755937662576_iw32nv",
  "sensorId": "SENSOR_1755937682586_yeu8cu",
  "data": {
    "sensor_id": "SENSOR_1755937682586_yeu8cu",
    "function_code": "01读写",
    "collection_cycle": 10
  }
}
2025-09-20 01:43:04.242 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.243 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.243 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.244 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.244 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.244 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.245 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.246 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 18
}
2025-09-20 01:43:04.247 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/DTU_1755937662576_iw32nv",
  "statusCode": 200,
  "responseTime": 10,
  "requestId": "316c3789-4e1d-4c1e-ab2a-8f7790c9cbca"
}
2025-09-20 01:50:04.062 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 01:50:04.069 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:04.069 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:04.069 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 19
}
2025-09-20 01:50:04.069 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:13.323 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "4fa9e045-97d4-4726-8404-b1feb8d67dd0"
}
2025-09-20 01:50:13.325 [DEBUG] Cache miss
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "all_groups:",
  "cacheType": "long"
}
2025-09-20 01:50:13.325 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:13.330 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:13.331 [DEBUG] Cache set
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "all_groups:",
  "ttl": 3600,
  "cacheType": "long"
}
2025-09-20 01:50:13.333 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups",
  "statusCode": 200,
  "responseTime": 11,
  "requestId": "4fa9e045-97d4-4726-8404-b1feb8d67dd0"
}
2025-09-20 01:50:17.552 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/1",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "d8e11178-efd6-444e-b431-d02622519e38"
}
2025-09-20 01:50:17.553 [ERROR] Application error 路径 /api/groups/1 不存在
Error: 路径 /api/groups/1 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/groups/1",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "d8e11178-efd6-444e-b431-d02622519e38",
  "query": {},
  "params": {}
}
2025-09-20 01:50:17.554 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/1",
  "statusCode": 404,
  "responseTime": 2,
  "requestId": "d8e11178-efd6-444e-b431-d02622519e38"
}
2025-09-20 01:50:23.075 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/groups/24",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "090977bc-9931-49c7-9283-7b0d1834f705"
}
2025-09-20 01:50:23.077 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:23.080 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:23.081 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:23.081 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:23.082 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:23.082 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:23.083 [ERROR] Application error 分组不存在或为默认分组，无法修改
Error: 分组不存在或为默认分组，无法修改
    at DeviceData.updateGroup (/Users/xujing/Workspace/cloned-website/backend/src/models/deviceData.js:349:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/xujing/Workspace/cloned-website/backend/src/controllers/deviceController.js:464:20
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/groups/24",
  "method": "PUT",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "090977bc-9931-49c7-9283-7b0d1834f705",
  "body": {
    "group_name": "默认分组",
    "description": "测试更新"
  },
  "query": {},
  "params": {}
}
2025-09-20 01:50:23.083 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/groups/24",
  "statusCode": 500,
  "responseTime": 9,
  "requestId": "090977bc-9931-49c7-9283-7b0d1834f705"
}
2025-09-20 01:50:33.825 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/groups/25",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "624c8259-56d4-4315-9d6c-3f6acc0a3aa3"
}
2025-09-20 01:50:33.826 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:33.826 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:33.826 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:33.829 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 19
}
2025-09-20 01:50:33.829 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "device_groups_names:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 01:50:33.830 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "all_groups:.*",
  "deletedCount": 1,
  "cacheType": "long"
}
2025-09-20 01:50:33.830 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "default_group:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 01:50:33.830 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/groups/25",
  "statusCode": 200,
  "responseTime": 5,
  "requestId": "624c8259-56d4-4315-9d6c-3f6acc0a3aa3"
}
2025-09-20 02:26:00.770 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:26:00.779 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 20
}
2025-09-20 02:26:00.779 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 20
}
2025-09-20 02:26:00.779 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 20
}
2025-09-20 02:26:00.779 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 20
}
2025-09-20 02:27:53.512 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:27:53.518 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 21
}
2025-09-20 02:27:53.518 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 21
}
2025-09-20 02:27:53.519 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 21
}
2025-09-20 02:27:53.519 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 21
}
2025-09-20 02:28:23.528 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:28:23.535 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:23.535 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:23.536 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 22
}
2025-09-20 02:28:23.536 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:37.320 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/names",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "14a329fa-1b2c-4093-a1a4-e80441a11c07"
}
2025-09-20 02:28:37.321 [DEBUG] Cache miss
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "device_groups_names:",
  "cacheType": "long"
}
2025-09-20 02:28:37.321 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:37.324 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:37.324 [DEBUG] Cache set
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "device_groups_names:",
  "ttl": 3600,
  "cacheType": "long"
}
2025-09-20 02:28:37.326 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/names",
  "statusCode": 200,
  "responseTime": 5,
  "requestId": "14a329fa-1b2c-4093-a1a4-e80441a11c07"
}
2025-09-20 02:28:42.308 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "53de3102-ef02-4fda-a693-ec3c81d1aa5d"
}
2025-09-20 02:28:42.308 [DEBUG] Cache miss
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "all_groups:",
  "cacheType": "long"
}
2025-09-20 02:28:42.308 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:42.310 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:42.310 [DEBUG] Cache set
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "all_groups:",
  "ttl": 3600,
  "cacheType": "long"
}
2025-09-20 02:28:42.311 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups",
  "statusCode": 200,
  "responseTime": 4,
  "requestId": "53de3102-ef02-4fda-a693-ec3c81d1aa5d"
}
2025-09-20 02:28:47.308 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/default",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "c234c3e7-b6d1-4d5e-9f92-720cbf31c845"
}
2025-09-20 02:28:47.308 [DEBUG] Cache miss
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "default_group:",
  "cacheType": "long"
}
2025-09-20 02:28:47.308 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:47.309 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 22
}
2025-09-20 02:28:47.309 [DEBUG] Cache set
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "default_group:",
  "ttl": 3600,
  "cacheType": "long"
}
2025-09-20 02:28:47.310 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/groups/default",
  "statusCode": 200,
  "responseTime": 3,
  "requestId": "c234c3e7-b6d1-4d5e-9f92-720cbf31c845"
}
2025-09-20 02:28:59.375 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/groups",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "c820dc62-0e28-4467-b043-a48ce856285b"
}
2025-09-20 02:28:59.377 [ERROR] Application error req.validationErrors is not a function
TypeError: req.validationErrors is not a function
    at handleValidationErrors (/Users/xujing/Workspace/cloned-website/backend/src/middleware/groupValidation.js:7:22)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/route.js:157:13)
    at middleware (/Users/xujing/Workspace/cloned-website/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/groups",
  "method": "POST",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "c820dc62-0e28-4467-b043-a48ce856285b",
  "body": {
    "group_name": "测试分组API",
    "description": "测试新的分组API"
  },
  "query": {},
  "params": {}
}
2025-09-20 02:28:59.377 [WARN] Type error req.validationErrors is not a function
{
  "service": "iot-backend",
  "version": "1.0.0",
  "name": "TypeError",
  "requestId": "c820dc62-0e28-4467-b043-a48ce856285b"
}
2025-09-20 02:28:59.378 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/groups",
  "statusCode": 400,
  "responseTime": 3,
  "requestId": "c820dc62-0e28-4467-b043-a48ce856285b"
}
2025-09-20 02:29:06.988 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:29:06.994 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 23
}
2025-09-20 02:29:06.995 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 23
}
2025-09-20 02:29:06.995 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 23
}
2025-09-20 02:29:06.995 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 23
}
2025-09-20 02:29:19.374 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:29:19.381 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:19.382 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:19.383 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 24
}
2025-09-20 02:29:19.383 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:21.450 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/groups",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "dadb0a92-ce9e-4327-ab2f-510521cae4a8"
}
2025-09-20 02:29:21.453 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:21.455 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:21.456 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:21.459 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:21.459 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "device_groups_names:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:21.460 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/groups",
  "statusCode": 200,
  "responseTime": 10,
  "requestId": "dadb0a92-ce9e-4327-ab2f-510521cae4a8"
}
2025-09-20 02:29:28.312 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/groups/26",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "42375e68-547b-49a0-a759-d8b87f7ba297"
}
2025-09-20 02:29:28.313 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:28.313 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:28.314 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:28.315 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:28.315 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "device_groups_names:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:28.315 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "all_groups:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:28.315 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "default_group:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:28.316 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/groups/26",
  "statusCode": 200,
  "responseTime": 4,
  "requestId": "42375e68-547b-49a0-a759-d8b87f7ba297"
}
2025-09-20 02:29:32.906 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/groups/26",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "5fe0252e-e658-4623-be2c-64254c0917fb"
}
2025-09-20 02:29:32.906 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:32.909 [DEBUG] Transaction started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "isolationLevel": "READ COMMITTED",
  "attempt": 1,
  "threadId": 24
}
2025-09-20 02:29:32.912 [INFO] Group deleted successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "deletedGroupId": "26",
  "deletedGroupName": "更新后的分组API",
  "movedDevicesCount": 0,
  "defaultGroupName": "默认分组"
}
2025-09-20 02:29:32.912 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "device_groups_names:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:32.912 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "all_groups:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:32.912 [DEBUG] Cache pattern delete
{
  "service": "iot-backend",
  "version": "1.0.0",
  "pattern": "default_group:.*",
  "deletedCount": 0,
  "cacheType": "long"
}
2025-09-20 02:29:32.913 [DEBUG] Transaction committed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24,
  "attempt": 1
}
2025-09-20 02:29:32.913 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:32.914 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/groups/26",
  "statusCode": 200,
  "responseTime": 7,
  "requestId": "5fe0252e-e658-4623-be2c-64254c0917fb"
}
2025-09-20 02:29:39.443 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/dtu/move-to-group",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "27fe1562-542e-43ba-ad69-6fc0359ec074"
}
2025-09-20 02:29:39.444 [INFO] Starting device group move
{
  "service": "iot-backend",
  "version": "1.0.0",
  "deviceIds": [
    1,
    2
  ],
  "targetGroup": "默认分组"
}
2025-09-20 02:29:39.444 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:39.447 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 24
}
2025-09-20 02:29:39.447 [DEBUG] Found devices for group move
{
  "service": "iot-backend",
  "version": "1.0.0",
  "deviceCount": 0
}
2025-09-20 02:29:39.447 [DEBUG] Devices to move
{
  "service": "iot-backend",
  "version": "1.0.0",
  "count": 0
}
2025-09-20 02:29:39.447 [DEBUG] Devices already in target group
{
  "service": "iot-backend",
  "version": "1.0.0",
  "count": 0
}
2025-09-20 02:29:39.447 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/dtu/move-to-group",
  "statusCode": 200,
  "responseTime": 4,
  "requestId": "27fe1562-542e-43ba-ad69-6fc0359ec074"
}
2025-09-20 02:29:49.442 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:29:49.449 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 25
}
2025-09-20 02:29:49.449 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 25
}
2025-09-20 02:29:49.449 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 25
}
2025-09-20 02:29:49.449 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 25
}
2025-09-20 02:30:46.343 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:30:46.352 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 26
}
2025-09-20 02:30:46.352 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 26
}
2025-09-20 02:30:46.353 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 26
}
2025-09-20 02:30:46.353 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 26
}
2025-09-20 02:32:21.364 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:32:21.370 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 27
}
2025-09-20 02:32:21.370 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 27
}
2025-09-20 02:32:21.371 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 27
}
2025-09-20 02:32:21.371 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 27
}
2025-09-20 02:32:46.701 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:32:46.710 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 28
}
2025-09-20 02:32:46.710 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 28
}
2025-09-20 02:32:46.711 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 28
}
2025-09-20 02:32:46.711 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 28
}
2025-09-20 02:32:55.740 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:32:55.747 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 29
}
2025-09-20 02:32:55.747 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 29
}
2025-09-20 02:32:55.748 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 29
}
2025-09-20 02:32:55.748 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 29
}
2025-09-20 02:33:24.265 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:33:24.273 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 30
}
2025-09-20 02:33:24.274 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 30
}
2025-09-20 02:33:24.274 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 30
}
2025-09-20 02:33:24.274 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 30
}
2025-09-20 02:33:37.908 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:33:37.915 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 31
}
2025-09-20 02:33:37.915 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 31
}
2025-09-20 02:33:37.915 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 31
}
2025-09-20 02:33:37.915 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 31
}
2025-09-20 02:33:41.953 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:33:41.959 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 32
}
2025-09-20 02:33:41.959 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 32
}
2025-09-20 02:33:41.960 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 32
}
2025-09-20 02:33:41.960 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 32
}
2025-09-20 02:34:00.101 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 33
}
2025-09-20 02:34:00.102 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 33
}
2025-09-20 02:34:00.102 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 33
}
2025-09-20 02:34:00.102 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 33
}
2025-09-20 02:34:29.456 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 34
}
2025-09-20 02:34:29.456 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 34
}
2025-09-20 02:34:29.457 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 34
}
2025-09-20 02:34:29.457 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 34
}
2025-09-20 02:34:42.193 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 35
}
2025-09-20 02:34:42.193 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 35
}
2025-09-20 02:34:42.193 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 35
}
2025-09-20 02:34:42.194 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 35
}
2025-09-20 02:34:47.781 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 36
}
2025-09-20 02:34:47.781 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 36
}
2025-09-20 02:34:47.781 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 36
}
2025-09-20 02:34:47.781 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 36
}
2025-09-20 02:34:53.563 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:34:53.570 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 37
}
2025-09-20 02:34:53.570 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 37
}
2025-09-20 02:34:53.571 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 37
}
2025-09-20 02:34:53.571 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 37
}
2025-09-20 02:35:11.223 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:35:11.230 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 38
}
2025-09-20 02:35:11.230 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 38
}
2025-09-20 02:35:11.231 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 38
}
2025-09-20 02:35:11.231 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 38
}
2025-09-20 02:37:01.704 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 39
}
2025-09-20 02:37:01.704 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 39
}
2025-09-20 02:37:01.704 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 39
}
2025-09-20 02:37:01.705 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 39
}
2025-09-20 02:37:32.773 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 40
}
2025-09-20 02:37:32.774 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 40
}
2025-09-20 02:37:32.774 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 40
}
2025-09-20 02:37:32.774 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 40
}
2025-09-20 02:38:09.481 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 41
}
2025-09-20 02:38:09.481 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 41
}
2025-09-20 02:38:09.481 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 41
}
2025-09-20 02:38:09.482 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 41
}
2025-09-20 02:38:54.875 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 42
}
2025-09-20 02:38:54.875 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 42
}
2025-09-20 02:38:54.876 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 42
}
2025-09-20 02:38:54.876 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 42
}
2025-09-20 02:39:07.290 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 43
}
2025-09-20 02:39:07.290 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 43
}
2025-09-20 02:39:07.291 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 43
}
2025-09-20 02:39:07.291 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 43
}
2025-09-20 02:39:38.492 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 44
}
2025-09-20 02:39:38.492 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 44
}
2025-09-20 02:39:38.493 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 44
}
2025-09-20 02:39:38.493 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 44
}
2025-09-20 02:39:47.228 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 45
}
2025-09-20 02:39:47.229 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 45
}
2025-09-20 02:39:47.229 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 45
}
2025-09-20 02:39:47.229 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 45
}
2025-09-20 02:41:06.557 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 46
}
2025-09-20 02:41:06.557 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 46
}
2025-09-20 02:41:06.557 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 46
}
2025-09-20 02:41:06.557 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 46
}
2025-09-20 02:41:15.369 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 47
}
2025-09-20 02:41:15.370 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 47
}
2025-09-20 02:41:15.370 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 47
}
2025-09-20 02:41:15.370 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 47
}
2025-09-20 02:41:42.777 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 48
}
2025-09-20 02:41:42.777 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 48
}
2025-09-20 02:41:42.778 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 48
}
2025-09-20 02:41:42.778 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 48
}
2025-09-20 02:42:42.672 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 49
}
2025-09-20 02:42:42.673 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 49
}
2025-09-20 02:42:42.673 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 49
}
2025-09-20 02:42:42.673 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 49
}
2025-09-20 02:43:05.242 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 50
}
2025-09-20 02:43:05.242 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 50
}
2025-09-20 02:43:05.242 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 50
}
2025-09-20 02:43:05.243 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 50
}
2025-09-20 02:43:44.363 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:43:44.371 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 51
}
2025-09-20 02:43:44.372 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 51
}
2025-09-20 02:43:44.372 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 51
}
2025-09-20 02:43:44.372 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 51
}
2025-09-20 02:44:11.612 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:44:11.620 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:11.621 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:11.621 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 52
}
2025-09-20 02:44:11.621 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:18.631 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/1",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "895bcd97-0ddf-44f9-a797-fd66b87af3e3"
}
2025-09-20 02:44:18.632 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "1"
}
2025-09-20 02:44:18.633 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:18.636 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:18.638 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/1",
  "statusCode": 200,
  "responseTime": 6,
  "requestId": "895bcd97-0ddf-44f9-a797-fd66b87af3e3"
}
2025-09-20 02:44:24.365 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu-config",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "bdadf87c-3c15-4de3-bd95-2d0a3d2a4fe4"
}
2025-09-20 02:44:24.367 [DEBUG] Creating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "params": {
    "dtu_id": "1",
    "sensor_id": "1",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  }
}
2025-09-20 02:44:24.367 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:24.373 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:24.373 [ERROR] Query error recorded
{
  "service": "iot-backend",
  "version": "1.0.0",
  "error": "Cannot add or update a child row: a foreign key constraint fails (`dam_monitoring_system`.`mb_rtu_config`, CONSTRAINT `mb_rtu_config_ibfk_1` FOREIGN KEY (`dtu_id`) REFERENCES `dtu_devices` (`device_id`) ON DELETE CASCADE)",
  "code": "ER_NO_REFERENCED_ROW_2",
  "query": "INSERT INTO mb_rtu_config (\n        dtu_id, sensor_id, slave_address, function_code, offset_value, \n        data_format, data_bits, byte_order_value, collection_cycle\n      ) VALUES (?, ?, ?, ?, ?, ?,"
}
2025-09-20 02:44:24.374 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu-config",
  "statusCode": 500,
  "responseTime": 9,
  "requestId": "bdadf87c-3c15-4de3-bd95-2d0a3d2a4fe4"
}
2025-09-20 02:44:32.012 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/dtu?limit=5",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3fb52e19-a5cf-43f5-a797-e2eb2890779a"
}
2025-09-20 02:44:32.013 [DEBUG] Getting all DTU devices
{
  "service": "iot-backend",
  "version": "1.0.0",
  "page": 1,
  "limit": 5,
  "offset": 0,
  "params": {
    "limit": "5"
  }
}
2025-09-20 02:44:32.013 [DEBUG] Cache miss
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "dtu_devices:group:|limit:5|page:1|search:|status:",
  "cacheType": "short"
}
2025-09-20 02:44:32.013 [DEBUG] Count query
{
  "service": "iot-backend",
  "version": "1.0.0",
  "query": "SELECT COUNT(*) as total FROM dtu_devices",
  "params": []
}
2025-09-20 02:44:32.014 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:32.016 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:32.016 [DEBUG] Data query
{
  "service": "iot-backend",
  "version": "1.0.0",
  "query": "SELECT * FROM dtu_devices ORDER BY created_at DESC LIMIT 5 OFFSET 0",
  "limit": 5,
  "offset": 0
}
2025-09-20 02:44:32.017 [DEBUG] Executing query without WHERE params
{
  "service": "iot-backend",
  "version": "1.0.0"
}
2025-09-20 02:44:32.017 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:32.018 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:32.018 [DEBUG] Cache set
{
  "service": "iot-backend",
  "version": "1.0.0",
  "key": "dtu_devices:group:|limit:5|page:1|search:|status:",
  "ttl": 60,
  "cacheType": "short"
}
2025-09-20 02:44:32.018 [DEBUG] Query result
{
  "service": "iot-backend",
  "version": "1.0.0",
  "deviceCount": 5,
  "total": "7",
  "page": 1
}
2025-09-20 02:44:32.018 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/dtu?limit=5",
  "statusCode": 200,
  "responseTime": 6,
  "requestId": "3fb52e19-a5cf-43f5-a797-e2eb2890779a"
}
2025-09-20 02:44:38.396 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu-config",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "a818814c-a774-4d88-881a-fa13b9a5e135"
}
2025-09-20 02:44:38.397 [DEBUG] Creating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "params": {
    "dtu_id": "TEST_DEVICE_001",
    "sensor_id": "SENSOR_001",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  }
}
2025-09-20 02:44:38.397 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:38.399 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:38.399 [ERROR] Query error recorded
{
  "service": "iot-backend",
  "version": "1.0.0",
  "error": "Duplicate entry 'TEST_DEVICE_001-SENSOR_001' for key 'mb_rtu_config.dtu_id'",
  "code": "ER_DUP_ENTRY",
  "query": "INSERT INTO mb_rtu_config (\n        dtu_id, sensor_id, slave_address, function_code, offset_value, \n        data_format, data_bits, byte_order_value, collection_cycle\n      ) VALUES (?, ?, ?, ?, ?, ?,"
}
2025-09-20 02:44:38.399 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu-config",
  "statusCode": 500,
  "responseTime": 3,
  "requestId": "a818814c-a774-4d88-881a-fa13b9a5e135"
}
2025-09-20 02:44:44.511 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "bace8bde-2ba6-4326-88ad-21e7e5a44d1f"
}
2025-09-20 02:44:44.512 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "slave_address": 2,
    "function_code": "03读写",
    "offset_value": 10,
    "data_format": "32位有符号数",
    "collection_cycle": 5
  }
}
2025-09-20 02:44:44.512 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.513 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.513 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.515 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.515 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.515 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.515 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.518 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:44.518 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 7,
  "requestId": "bace8bde-2ba6-4326-88ad-21e7e5a44d1f"
}
2025-09-20 02:44:55.327 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "26c63d06-d362-4326-9c37-8e081844d7cf"
}
2025-09-20 02:44:55.327 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001"
}
2025-09-20 02:44:55.327 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:55.328 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:44:55.329 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 3,
  "requestId": "26c63d06-d362-4326-9c37-8e081844d7cf"
}
2025-09-20 02:45:01.656 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "8e3701b3-8042-4479-b7dc-1575b508aada"
}
2025-09-20 02:45:01.657 [DEBUG] Batch updating MB RTU configs
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "configCount": 1
}
2025-09-20 02:45:01.657 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.658 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.658 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "sensor_id": "SENSOR_001",
    "slave_address": 3,
    "function_code": "02只读",
    "offset_value": 20,
    "data_format": "16位无符号数",
    "collection_cycle": 3
  }
}
2025-09-20 02:45:01.659 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.659 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.659 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.660 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.660 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.660 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.660 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.662 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:01.662 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 6,
  "requestId": "8e3701b3-8042-4479-b7dc-1575b508aada"
}
2025-09-20 02:45:06.123 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "672de9da-14d2-40fc-a6ab-094e15af733c"
}
2025-09-20 02:45:06.124 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 02:45:06.124 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:06.125 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 52
}
2025-09-20 02:45:06.125 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 2,
  "requestId": "672de9da-14d2-40fc-a6ab-094e15af733c"
}
2025-09-20 02:45:19.090 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 02:45:19.096 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 53
}
2025-09-20 02:45:19.096 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 53
}
2025-09-20 02:45:19.097 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 53
}
2025-09-20 02:45:19.097 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 53
}
2025-09-20 16:51:20.859 [DEBUG] Creating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "params": {
    "dtu_id": "TEST_DEVICE_001",
    "sensor_id": "SENSOR_TEST_001",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  }
}
2025-09-20 16:51:20.872 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 54
}
2025-09-20 16:51:20.873 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 54
}
2025-09-20 16:51:20.873 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 54
}
2025-09-20 16:51:20.873 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 54
}
2025-09-20 16:51:20.874 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 55
}
2025-09-20 16:51:20.874 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 55
}
2025-09-20 16:51:20.878 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 55
}
2025-09-20 16:51:20.878 [ERROR] Query error recorded
{
  "service": "iot-backend",
  "version": "1.0.0",
  "error": "Cannot add or update a child row: a foreign key constraint fails (`dam_monitoring_system`.`mb_rtu_config`, CONSTRAINT `mb_rtu_config_ibfk_2` FOREIGN KEY (`sensor_id`) REFERENCES `sensors` (`sensor_id`) ON DELETE CASCADE)",
  "code": "ER_NO_REFERENCED_ROW_2",
  "query": "INSERT INTO mb_rtu_config (\n        dtu_id, sensor_id, slave_address, function_code, offset_value, \n        data_format, data_bits, byte_order_value, collection_cycle\n      ) VALUES (?, ?, ?, ?, ?, ?,"
}
2025-09-20 16:51:35.723 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 56
}
2025-09-20 16:51:35.724 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 56
}
2025-09-20 16:51:35.724 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 56
}
2025-09-20 16:51:35.725 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 56
}
2025-09-20 17:01:26.359 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:01:26.366 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:26.366 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:26.367 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 57
}
2025-09-20 17:01:26.367 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:37.740 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:01:37.747 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 58
}
2025-09-20 17:01:37.747 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 58
}
2025-09-20 17:01:37.748 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 58
}
2025-09-20 17:01:37.748 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 58
}
2025-09-20 17:01:39.519 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "8a70c2b5-a932-438d-b779-b2c3b12131a4"
}
2025-09-20 17:01:39.520 [ERROR] Application error 路径 /api/mb-rtu-config/TEST_DEVICE_001 不存在
Error: 路径 /api/mb-rtu-config/TEST_DEVICE_001 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "method": "GET",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "8a70c2b5-a932-438d-b779-b2c3b12131a4",
  "query": {},
  "params": {}
}
2025-09-20 17:01:39.521 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu-config/TEST_DEVICE_001",
  "statusCode": 404,
  "responseTime": 3,
  "requestId": "8a70c2b5-a932-438d-b779-b2c3b12131a4"
}
2025-09-20 17:01:48.755 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "7eb64424-d858-46b8-99c3-80653830910d"
}
2025-09-20 17:01:48.756 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:01:48.756 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:48.760 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:48.761 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 5,
  "requestId": "7eb64424-d858-46b8-99c3-80653830910d"
}
2025-09-20 17:01:52.819 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "39a8033b-650c-4a6d-adb4-c0dcd07264cc"
}
2025-09-20 17:01:52.820 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001"
}
2025-09-20 17:01:52.820 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:52.821 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:52.822 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 2,
  "requestId": "39a8033b-650c-4a6d-adb4-c0dcd07264cc"
}
2025-09-20 17:01:57.285 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "b7eca756-a72c-420f-813f-cc6d658b385f"
}
2025-09-20 17:01:57.287 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "slave_address": 5,
    "function_code": "03读写",
    "offset_value": 30,
    "data_format": "32位有符号数",
    "collection_cycle": 10
  }
}
2025-09-20 17:01:57.287 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.289 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.289 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.290 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.290 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.290 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.291 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.293 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:01:57.293 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 8,
  "requestId": "b7eca756-a72c-420f-813f-cc6d658b385f"
}
2025-09-20 17:02:02.193 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "c9af6afb-9ddd-4616-970e-563dc7e33d18"
}
2025-09-20 17:02:02.194 [DEBUG] Batch updating MB RTU configs
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "configCount": 1
}
2025-09-20 17:02:02.195 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.195 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.195 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "sensor_id": "SENSOR_001",
    "slave_address": 7,
    "function_code": "01读写",
    "offset_value": 50,
    "data_format": "64位浮点型数",
    "collection_cycle": 15
  }
}
2025-09-20 17:02:02.196 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.196 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.196 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.197 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.197 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.197 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.197 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.199 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:02.199 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 6,
  "requestId": "c9af6afb-9ddd-4616-970e-563dc7e33d18"
}
2025-09-20 17:02:06.043 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "51bfaba0-1e79-4e8d-9f13-bc55c394880c"
}
2025-09-20 17:02:06.043 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:02:06.043 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:06.044 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:02:06.044 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 1,
  "requestId": "51bfaba0-1e79-4e8d-9f13-bc55c394880c"
}
2025-09-20 17:02:13.346 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:13.352 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 59
}
2025-09-20 17:02:13.353 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 59
}
2025-09-20 17:02:13.353 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 59
}
2025-09-20 17:02:13.353 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 59
}
2025-09-20 17:02:41.096 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:41.103 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 60
}
2025-09-20 17:02:41.103 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 60
}
2025-09-20 17:02:41.103 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 60
}
2025-09-20 17:02:41.103 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 60
}
2025-09-20 17:02:43.393 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:43.400 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 61
}
2025-09-20 17:02:43.400 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 61
}
2025-09-20 17:02:43.401 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 61
}
2025-09-20 17:02:43.401 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 61
}
2025-09-20 17:02:46.701 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:46.707 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 62
}
2025-09-20 17:02:46.708 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 62
}
2025-09-20 17:02:46.708 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 62
}
2025-09-20 17:02:46.708 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 62
}
2025-09-20 17:02:49.411 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:49.417 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 63
}
2025-09-20 17:02:49.417 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 63
}
2025-09-20 17:02:49.418 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 63
}
2025-09-20 17:02:49.418 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 63
}
2025-09-20 17:02:52.372 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:52.379 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 64
}
2025-09-20 17:02:52.379 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 64
}
2025-09-20 17:02:52.379 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 64
}
2025-09-20 17:02:52.379 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 64
}
2025-09-20 17:02:55.265 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:55.276 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 65
}
2025-09-20 17:02:55.277 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 65
}
2025-09-20 17:02:55.278 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 65
}
2025-09-20 17:02:55.278 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 65
}
2025-09-20 17:02:58.077 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:02:58.083 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 66
}
2025-09-20 17:02:58.084 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 66
}
2025-09-20 17:02:58.084 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 66
}
2025-09-20 17:02:58.084 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 66
}
2025-09-20 17:03:00.913 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:00.919 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 67
}
2025-09-20 17:03:00.919 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 67
}
2025-09-20 17:03:00.920 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 67
}
2025-09-20 17:03:00.920 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 67
}
2025-09-20 17:03:04.010 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:04.016 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 68
}
2025-09-20 17:03:04.016 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 68
}
2025-09-20 17:03:04.017 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 68
}
2025-09-20 17:03:04.017 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 68
}
2025-09-20 17:03:06.947 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:06.953 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 69
}
2025-09-20 17:03:06.954 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 69
}
2025-09-20 17:03:06.954 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 69
}
2025-09-20 17:03:06.954 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 69
}
2025-09-20 17:03:09.775 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:09.782 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 70
}
2025-09-20 17:03:09.782 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 70
}
2025-09-20 17:03:09.782 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 70
}
2025-09-20 17:03:09.782 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 70
}
2025-09-20 17:03:11.304 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:11.311 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 71
}
2025-09-20 17:03:11.311 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 71
}
2025-09-20 17:03:11.311 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 71
}
2025-09-20 17:03:11.312 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 71
}
2025-09-20 17:03:15.869 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "dcfff221-4240-4233-84d5-c517fcf720df"
}
2025-09-20 17:03:15.869 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:03:15.869 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:15.871 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:15.871 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 2,
  "requestId": "dcfff221-4240-4233-84d5-c517fcf720df"
}
2025-09-20 17:03:20.319 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "86bcb370-8272-41fa-868f-edead7bfb7af"
}
2025-09-20 17:03:20.319 [DEBUG] Getting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001"
}
2025-09-20 17:03:20.319 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:20.320 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:20.320 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 1,
  "requestId": "86bcb370-8272-41fa-868f-edead7bfb7af"
}
2025-09-20 17:03:25.193 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "31a17fc8-7d6e-48c5-bff5-21336b79d88c"
}
2025-09-20 17:03:25.194 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "slave_address": 9,
    "function_code": "04只读",
    "offset_value": 100,
    "data_format": "16位有符号数",
    "collection_cycle": 20
  }
}
2025-09-20 17:03:25.194 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.195 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.195 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.195 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.195 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.196 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.196 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.197 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:25.198 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 5,
  "requestId": "31a17fc8-7d6e-48c5-bff5-21336b79d88c"
}
2025-09-20 17:03:29.608 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3e46a3f3-a5c5-40b5-8e12-edcd6c51331d"
}
2025-09-20 17:03:29.609 [DEBUG] Batch updating MB RTU configs
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "configCount": 1
}
2025-09-20 17:03:29.609 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.610 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.610 [DEBUG] Updating MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "sensor_id": "SENSOR_001",
    "slave_address": 11,
    "function_code": "02只读",
    "offset_value": 200,
    "data_format": "32位无符号数",
    "collection_cycle": 25
  }
}
2025-09-20 17:03:29.610 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.611 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.611 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.611 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.611 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.611 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.611 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.612 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:03:29.613 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 5,
  "requestId": "3e46a3f3-a5c5-40b5-8e12-edcd6c51331d"
}
2025-09-20 17:03:38.189 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:38.195 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 72
}
2025-09-20 17:03:38.196 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 72
}
2025-09-20 17:03:38.196 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 72
}
2025-09-20 17:03:38.196 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 72
}
2025-09-20 17:03:39.952 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:03:39.960 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 73
}
2025-09-20 17:03:39.960 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 73
}
2025-09-20 17:03:39.961 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 73
}
2025-09-20 17:03:39.961 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 73
}
2025-09-20 17:04:01.694 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:04:01.700 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 74
}
2025-09-20 17:04:01.701 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 74
}
2025-09-20 17:04:01.701 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 74
}
2025-09-20 17:04:01.701 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 74
}
2025-09-20 17:05:21.982 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:05:21.988 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 75
}
2025-09-20 17:05:21.988 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 75
}
2025-09-20 17:05:21.989 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 75
}
2025-09-20 17:05:21.989 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 75
}
2025-09-20 17:05:51.914 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:05:51.920 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 76
}
2025-09-20 17:05:51.920 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 76
}
2025-09-20 17:05:51.921 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 76
}
2025-09-20 17:05:51.921 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 76
}
2025-09-20 17:05:58.470 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:05:58.477 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 77
}
2025-09-20 17:05:58.478 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 77
}
2025-09-20 17:05:58.478 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 77
}
2025-09-20 17:05:58.478 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 77
}
2025-09-20 17:05:59.773 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:05:59.780 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 78
}
2025-09-20 17:05:59.781 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 78
}
2025-09-20 17:05:59.781 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 78
}
2025-09-20 17:05:59.781 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 78
}
2025-09-20 17:06:10.474 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:06:10.481 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 79
}
2025-09-20 17:06:10.481 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 79
}
2025-09-20 17:06:10.481 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 79
}
2025-09-20 17:06:10.481 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 79
}
2025-09-20 17:06:12.037 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:06:12.044 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 80
}
2025-09-20 17:06:12.044 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 80
}
2025-09-20 17:06:12.044 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 80
}
2025-09-20 17:06:12.045 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 80
}
2025-09-20 17:06:18.648 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "ed24c7e2-7c08-4099-b225-8458d0fd4846"
}
2025-09-20 17:06:18.649 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:06:18.649 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:06:18.649 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 57
}
2025-09-20 17:06:18.650 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 2,
  "requestId": "ed24c7e2-7c08-4099-b225-8458d0fd4846"
}
2025-09-20 17:06:23.441 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "2136df5e-c268-45e2-8092-b0d42a9eab49"
}
2025-09-20 17:06:23.441 [ERROR] Application error 路径 /api/mb-rtu/TEST_DEVICE_001/SENSOR_001 不存在
Error: 路径 /api/mb-rtu/TEST_DEVICE_001/SENSOR_001 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "method": "DELETE",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "2136df5e-c268-45e2-8092-b0d42a9eab49",
  "query": {},
  "params": {}
}
2025-09-20 17:06:23.442 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 404,
  "responseTime": 1,
  "requestId": "2136df5e-c268-45e2-8092-b0d42a9eab49"
}
2025-09-20 17:06:29.663 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:06:29.668 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:29.669 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:29.669 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 81
}
2025-09-20 17:06:29.669 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:35.889 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:06:35.896 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 82
}
2025-09-20 17:06:35.897 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 82
}
2025-09-20 17:06:35.897 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 82
}
2025-09-20 17:06:35.897 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 82
}
2025-09-20 17:06:37.604 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3c17c445-8fcb-4f21-95f0-e31af4296829"
}
2025-09-20 17:06:37.605 [DEBUG] Deleting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001"
}
2025-09-20 17:06:37.606 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.611 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.611 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.613 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.613 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.614 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.614 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.616 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:37.618 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 15,
  "requestId": "3c17c445-8fcb-4f21-95f0-e31af4296829"
}
2025-09-20 17:06:42.284 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3ffb0776-a83a-4847-8d39-c2db47f804d3"
}
2025-09-20 17:06:42.284 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:06:42.284 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:42.286 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:42.287 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 3,
  "requestId": "3ffb0776-a83a-4847-8d39-c2db47f804d3"
}
2025-09-20 17:06:46.426 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "eb75beaf-6502-4ba5-a8d4-c366f77b9ae6"
}
2025-09-20 17:06:46.427 [DEBUG] Deleting MB RTU config
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001"
}
2025-09-20 17:06:46.427 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:46.428 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:46.428 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:46.428 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:46.428 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:46.429 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:06:46.429 [ERROR] Application error MB-RTU协议不存在
Error: MB-RTU协议不存在
    at MbRtuData.deleteMBRTU (/Users/xujing/Workspace/cloned-website/backend/src/models/mbRtuData.js:198:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/xujing/Workspace/cloned-website/backend/src/controllers/mbRtuController.js:81:20
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "method": "DELETE",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "eb75beaf-6502-4ba5-a8d4-c366f77b9ae6",
  "query": {},
  "params": {}
}
2025-09-20 17:06:46.430 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 500,
  "responseTime": 3,
  "requestId": "eb75beaf-6502-4ba5-a8d4-c366f77b9ae6"
}
2025-09-20 17:06:56.283 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:06:56.289 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 83
}
2025-09-20 17:06:56.290 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 83
}
2025-09-20 17:06:56.290 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 83
}
2025-09-20 17:06:56.290 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 83
}
2025-09-20 17:06:56.933 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:06:56.943 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 84
}
2025-09-20 17:06:56.943 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 84
}
2025-09-20 17:06:56.944 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 84
}
2025-09-20 17:06:56.944 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 84
}
2025-09-20 17:09:16.082 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:16.091 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 85
}
2025-09-20 17:09:16.092 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 85
}
2025-09-20 17:09:16.093 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 85
}
2025-09-20 17:09:16.093 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 85
}
2025-09-20 17:09:21.599 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:21.605 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 86
}
2025-09-20 17:09:21.605 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 86
}
2025-09-20 17:09:21.606 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 86
}
2025-09-20 17:09:21.606 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 86
}
2025-09-20 17:09:29.384 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:29.391 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 87
}
2025-09-20 17:09:29.391 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 87
}
2025-09-20 17:09:29.391 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 87
}
2025-09-20 17:09:29.392 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 87
}
2025-09-20 17:09:33.254 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:33.261 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 88
}
2025-09-20 17:09:33.261 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 88
}
2025-09-20 17:09:33.262 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 88
}
2025-09-20 17:09:33.262 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 88
}
2025-09-20 17:09:36.342 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:36.350 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 89
}
2025-09-20 17:09:36.350 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 89
}
2025-09-20 17:09:36.350 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 89
}
2025-09-20 17:09:36.351 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 89
}
2025-09-20 17:09:39.571 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:39.579 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 90
}
2025-09-20 17:09:39.580 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 90
}
2025-09-20 17:09:39.580 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 90
}
2025-09-20 17:09:39.580 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 90
}
2025-09-20 17:09:42.839 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:09:42.846 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 91
}
2025-09-20 17:09:42.847 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 91
}
2025-09-20 17:09:42.847 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 91
}
2025-09-20 17:09:42.847 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 91
}
2025-09-20 17:11:13.762 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:11:13.768 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 92
}
2025-09-20 17:11:13.768 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 92
}
2025-09-20 17:11:13.768 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 92
}
2025-09-20 17:11:13.769 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 92
}
2025-09-20 17:11:57.777 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "24514df2-2aec-4a4e-b815-59d79763870f"
}
2025-09-20 17:11:57.778 [DEBUG] Getting MB RTU configs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:11:57.778 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:11:57.779 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 81
}
2025-09-20 17:11:57.779 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 2,
  "requestId": "24514df2-2aec-4a4e-b815-59d79763870f"
}
2025-09-20 17:12:03.462 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "dd3fd09b-ca06-46bf-bc40-51e9f2c6be0b"
}
2025-09-20 17:12:03.463 [ERROR] Application error 路径 /api/mb-rtu 不存在
Error: 路径 /api/mb-rtu 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu",
  "method": "POST",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "dd3fd09b-ca06-46bf-bc40-51e9f2c6be0b",
  "body": {
    "dtu_id": "TEST_DEVICE_001",
    "sensor_id": "SENSOR_001",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  },
  "query": {},
  "params": {}
}
2025-09-20 17:12:03.463 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "statusCode": 404,
  "responseTime": 1,
  "requestId": "dd3fd09b-ca06-46bf-bc40-51e9f2c6be0b"
}
2025-09-20 17:12:10.957 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:12:10.963 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 93
}
2025-09-20 17:12:10.963 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 93
}
2025-09-20 17:12:10.964 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 93
}
2025-09-20 17:12:10.964 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 93
}
2025-09-20 17:12:14.684 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:12:14.692 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 94
}
2025-09-20 17:12:14.692 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 94
}
2025-09-20 17:12:14.692 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 94
}
2025-09-20 17:12:14.692 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 94
}
2025-09-20 17:12:20.811 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:12:20.817 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 95
}
2025-09-20 17:12:20.817 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 95
}
2025-09-20 17:12:20.817 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 95
}
2025-09-20 17:12:20.817 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 95
}
2025-09-20 17:12:22.228 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3cf05c51-427a-4d24-8f7a-06a25f11e570"
}
2025-09-20 17:12:22.229 [ERROR] Application error 路径 /api/mb-rtu 不存在
Error: 路径 /api/mb-rtu 不存在
    at notFoundHandler (/Users/xujing/Workspace/cloned-website/backend/src/middleware/errorHandler.js:136:17)
    at Layer.handleRequest (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/lib/layer.js:152:17)
    at trimPrefix (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:342:13)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:297:9
    at processParams (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:582:12)
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:291:5)
    at /Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:688:15
    at next (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:276:14)
    at Function.handle (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:186:3)
    at router (/Users/xujing/Workspace/cloned-website/backend/node_modules/router/index.js:60:12)
{
  "service": "iot-backend",
  "version": "1.0.0",
  "url": "/api/mb-rtu",
  "method": "POST",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "3cf05c51-427a-4d24-8f7a-06a25f11e570",
  "body": {
    "dtu_id": "TEST_DEVICE_001",
    "sensor_id": "SENSOR_001",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  },
  "query": {},
  "params": {}
}
2025-09-20 17:12:22.229 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "statusCode": 404,
  "responseTime": 1,
  "requestId": "3cf05c51-427a-4d24-8f7a-06a25f11e570"
}
2025-09-20 17:12:28.860 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:12:28.866 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:12:28.867 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:12:28.867 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 96
}
2025-09-20 17:12:28.867 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:12:35.770 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "99de0cab-729c-4266-a863-30ef6d8204f2"
}
2025-09-20 17:12:35.772 [DEBUG] Creating MB RTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "params": {
    "dtu_id": "TEST_DEVICE_001",
    "sensor_id": "SENSOR_001",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  }
}
2025-09-20 17:12:35.772 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:12:35.775 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:12:35.775 [ERROR] Query error recorded
{
  "service": "iot-backend",
  "version": "1.0.0",
  "error": "Table 'dam_monitoring_system.mb_rtu' doesn't exist",
  "code": "ER_NO_SUCH_TABLE",
  "query": "INSERT INTO mb_rtu (\n        dtu_id, sensor_id, slave_address, function_code, offset_value, \n        data_format, data_bits, byte_order_value, collection_cycle\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, "
}
2025-09-20 17:12:35.778 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "statusCode": 500,
  "responseTime": 9,
  "requestId": "99de0cab-729c-4266-a863-30ef6d8204f2"
}
2025-09-20 17:12:36.036 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:12:36.042 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 97
}
2025-09-20 17:12:36.043 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 97
}
2025-09-20 17:12:36.043 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 97
}
2025-09-20 17:12:36.043 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 97
}
2025-09-20 17:13:15.373 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "7ec8971a-3ca4-439c-88a1-472fa695f44f"
}
2025-09-20 17:13:15.374 [DEBUG] Creating MB RTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "params": {
    "dtu_id": "TEST_DEVICE_001",
    "sensor_id": "SENSOR_001",
    "slave_address": 1,
    "function_code": "04只读",
    "offset_value": 0,
    "data_format": "16位有符号数",
    "collection_cycle": 2
  }
}
2025-09-20 17:13:15.374 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:15.377 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:15.378 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "POST",
  "url": "/api/mb-rtu",
  "statusCode": 200,
  "responseTime": 4,
  "requestId": "7ec8971a-3ca4-439c-88a1-472fa695f44f"
}
2025-09-20 17:13:19.899 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "11108f1d-d277-4264-931b-0203203df8d5"
}
2025-09-20 17:13:19.899 [DEBUG] Getting MB RTUs by DTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001"
}
2025-09-20 17:13:19.899 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:19.901 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:19.902 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "GET",
  "url": "/api/mb-rtu/TEST_DEVICE_001",
  "statusCode": 200,
  "responseTime": 4,
  "requestId": "11108f1d-d277-4264-931b-0203203df8d5"
}
2025-09-20 17:13:24.975 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "100d6dfd-483d-436d-a930-e0ae6997c87d"
}
2025-09-20 17:13:24.977 [DEBUG] Updating MB RTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001",
  "data": {
    "slave_address": 5,
    "function_code": "03读写",
    "offset_value": 10,
    "data_format": "32位有符号数",
    "collection_cycle": 5
  }
}
2025-09-20 17:13:24.977 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.978 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.978 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.979 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.979 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.979 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.979 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.981 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:24.981 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "PUT",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 7,
  "requestId": "100d6dfd-483d-436d-a930-e0ae6997c87d"
}
2025-09-20 17:13:29.361 [INFO] Incoming request
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "ip": "::1",
  "userAgent": "curl/8.7.1",
  "requestId": "568ec20d-b3b9-4bdd-b4ff-2908bdd46ad2"
}
2025-09-20 17:13:29.361 [DEBUG] Deleting MB RTU
{
  "service": "iot-backend",
  "version": "1.0.0",
  "dtuId": "TEST_DEVICE_001",
  "sensorId": "SENSOR_001"
}
2025-09-20 17:13:29.361 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.362 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.362 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.362 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.363 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.363 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.363 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.365 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 96
}
2025-09-20 17:13:29.365 [INFO] Request completed
{
  "service": "iot-backend",
  "version": "1.0.0",
  "method": "DELETE",
  "url": "/api/mb-rtu/TEST_DEVICE_001/SENSOR_001",
  "statusCode": 200,
  "responseTime": 5,
  "requestId": "568ec20d-b3b9-4bdd-b4ff-2908bdd46ad2"
}
2025-09-20 17:13:43.354 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:13:43.360 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 100
}
2025-09-20 17:13:43.361 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 100
}
2025-09-20 17:13:43.361 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 100
}
2025-09-20 17:13:43.361 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 100
}
2025-09-20 17:14:02.045 [INFO] Server started
{
  "service": "iot-backend",
  "version": "1.0.0",
  "port": "3000",
  "environment": "development",
  "healthCheckUrl": "http://localhost:3000/health"
}
2025-09-20 17:14:02.051 [DEBUG] New database connection established
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 101
}
2025-09-20 17:14:02.051 [DEBUG] Database connection acquired
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 101
}
2025-09-20 17:14:02.052 [INFO] Database connected successfully
{
  "service": "iot-backend",
  "version": "1.0.0",
  "host": "localhost",
  "database": "dam_monitoring_system",
  "threadId": 101
}
2025-09-20 17:14:02.052 [DEBUG] Database connection released
{
  "service": "iot-backend",
  "version": "1.0.0",
  "threadId": 101
}
