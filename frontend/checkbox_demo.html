<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>选框样式演示</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .demo-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .device-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            margin: 8px 0;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .device-item:hover {
            background-color: #f0f0f0;
        }
        .device-checkbox {
            margin-right: 12px;
            flex-shrink: 0;
        }
        .device-checkbox input[type="checkbox"] {
            display: none;
        }
        .device-checkbox .checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid #d9d9d9;
            border-radius: 4px;
            background-color: white;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .device-checkbox .checkmark:hover {
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
        }
        .device-checkbox input[type="checkbox"]:checked + .checkmark {
            background-color: #1890ff;
            border-color: #1890ff;
        }
        /* 选中时不需要勾选标记，直接涂满蓝色 */
        .device-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .device-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }
        .device-details {
            font-size: 14px;
            color: #666;
            display: flex;
            gap: 12px;
        }
        .device-id {
            font-weight: bold;
        }
        .device-status {
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        .device-status.已连接 {
            background-color: #e1f3d8;
            color: #67c23a;
        }
        .device-status.未连接 {
            background-color: #fde2e2;
            color: #f56c6c;
        }
        .device-group {
            background-color: #e6f7ff;
            color: #1890ff;
            padding: 2px 8px;
            border-radius: 4px;
        }
        .comparison {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .old-style, .new-style {
            flex: 1;
            padding: 15px;
            border-radius: 5px;
        }
        .old-style {
            background-color: #fff2f0;
            border: 1px solid #ffccc7;
        }
        .new-style {
            background-color: #f6ffed;
            border: 1px solid #b7eb8f;
        }
        .old-checkbox .checkmark {
            width: 18px;
            height: 18px;
            border: 2px solid #d9d9d9;
            border-radius: 3px;
            background-color: white;
            position: relative;
        }
        .old-checkbox input[type="checkbox"]:checked + .checkmark {
            background-color: #1890ff;
            border-color: #1890ff;
        }
        .old-checkbox input[type="checkbox"]:checked + .checkmark::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 2px;
            width: 4px;
            height: 8px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>设备管理页面选框样式改进演示</h1>
        
        <div class="demo-section">
            <h3>改进后的选框样式</h3>
            <p>新的选框具有以下特点：</p>
            <ul>
                <li>更大的尺寸 (20x20px vs 18x18px)</li>
                <li>更圆润的边角 (4px vs 3px)</li>
                <li>悬停效果和阴影</li>
                <li>简洁的选中样式（涂满蓝色，无勾选标记）</li>
                <li>平滑的过渡动画</li>
            </ul>
        </div>

        <div class="comparison">
            <div class="old-style">
                <h4>改进前 (18x18px)</h4>
                <div class="device-item">
                    <div class="device-checkbox old-checkbox">
                        <input type="checkbox" id="old1">
                        <label for="old1" class="checkmark"></label>
                    </div>
                    <div class="device-info">
                        <div class="device-name">设备1</div>
                        <div class="device-details">
                            <span class="device-id">ID: DTU_001</span>
                            <span class="device-status 已连接">已连接</span>
                            <span class="device-group">默认分组</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="new-style">
                <h4>改进后 (20x20px)</h4>
                <div class="device-item">
                    <div class="device-checkbox">
                        <input type="checkbox" id="new1">
                        <label for="new1" class="checkmark"></label>
                    </div>
                    <div class="device-info">
                        <div class="device-name">设备1</div>
                        <div class="device-details">
                            <span class="device-id">ID: DTU_001</span>
                            <span class="device-status 已连接">已连接</span>
                            <span class="device-group">默认分组</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>交互演示</h3>
            <p>点击下面的选框体验改进后的交互效果：</p>
            
            <div class="device-item">
                <div class="device-checkbox">
                    <input type="checkbox" id="demo1">
                    <label for="demo1" class="checkmark"></label>
                </div>
                <div class="device-info">
                    <div class="device-name">温度传感器</div>
                    <div class="device-details">
                        <span class="device-id">ID: SENSOR_001</span>
                        <span class="device-status 已连接">已连接</span>
                        <span class="device-group">传感器组</span>
                    </div>
                </div>
            </div>

            <div class="device-item">
                <div class="device-checkbox">
                    <input type="checkbox" id="demo2">
                    <label for="demo2" class="checkmark"></label>
                </div>
                <div class="device-info">
                    <div class="device-name">湿度传感器</div>
                    <div class="device-details">
                        <span class="device-id">ID: SENSOR_002</span>
                        <span class="device-status 未连接">未连接</span>
                        <span class="device-group">传感器组</span>
                    </div>
                </div>
            </div>

            <div class="device-item">
                <div class="device-checkbox">
                    <input type="checkbox" id="demo3">
                    <label for="demo3" class="checkmark"></label>
                </div>
                <div class="device-info">
                    <div class="device-name">压力传感器</div>
                    <div class="device-details">
                        <span class="device-id">ID: SENSOR_003</span>
                        <span class="device-status 已连接">已连接</span>
                        <span class="device-group">传感器组</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>改进说明</h3>
            <p>选框样式的改进包括：</p>
            <ol>
                <li><strong>尺寸增大</strong>：从18x18px增加到20x20px，更容易点击</li>
                <li><strong>边角圆润</strong>：从3px圆角增加到4px，更现代的外观</li>
                <li><strong>悬停效果</strong>：鼠标悬停时显示蓝色边框和阴影</li>
                <li><strong>简洁选中样式</strong>：选中时直接涂满蓝色，无需勾选标记</li>
                <li><strong>过渡动画</strong>：所有状态变化都有平滑的过渡效果</li>
                <li><strong>居中对齐</strong>：使用flexbox确保选框完美居中</li>
            </ol>
        </div>

        <div class="demo-section">
            <h3>功能说明</h3>
            <p><strong>重置按钮功能更新</strong>：</p>
            <ul>
                <li><strong>原功能</strong>：调用后端API重置所选设备</li>
                <li><strong>新功能</strong>：清除所有勾选状态，不调用后端API</li>
                <li><strong>按钮文本</strong>：从"重置"改为"清除勾选"</li>
                <li><strong>使用场景</strong>：快速清除所有选择，重新开始选择</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>移动分组功能更新</h3>
            <p><strong>移动至分组功能改进</strong>：</p>
            <ul>
                <li><strong>原功能</strong>：点击按钮弹出输入框，手动输入分组名称</li>
                <li><strong>新功能</strong>：下拉选择框，从现有分组中选择</li>
                <li><strong>交互方式</strong>：点击下拉框显示所有设备分组选项</li>
                <li><strong>固定向上展开</strong>：始终向上展开，避免被底部遮挡</li>
                <li><strong>禁用状态</strong>：未选中设备时禁用下拉框</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>智能移动分组逻辑</h3>
            <p><strong>移动分组智能判断</strong>：</p>
            <ul>
                <li><strong>分组比较</strong>：自动比较设备当前分组与目标分组</li>
                <li><strong>智能筛选</strong>：只移动分组不同的设备，跳过相同分组的设备</li>
                <li><strong>用户提示</strong>：显示将要移动的设备数量和目标分组</li>
                <li><strong>操作确认</strong>：移动前需要用户确认操作</li>
                <li><strong>结果反馈</strong>：显示成功移动和跳过的设备数量</li>
                <li><strong>前端更新</strong>：移动成功后立即更新设备列表显示</li>
                <li><strong>后端同步</strong>：同时更新数据库中的设备分组信息</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>软删除功能</h3>
            <p><strong>设备软删除机制</strong>：</p>
            <ul>
                <li><strong>软删除</strong>：删除设备时标记为"已删除"状态，不真正删除数据</li>
                <li><strong>视觉区分</strong>：已删除设备显示为灰色，不可选中</li>
                <li><strong>设备图标</strong>：已删除设备显示设备图标而非选框</li>
                <li><strong>操作按钮</strong>：已删除设备显示"恢复设备"和"彻底删除"按钮</li>
                <li><strong>恢复功能</strong>：可以将已删除的设备恢复到"未连接"状态</li>
                <li><strong>静默操作</strong>：恢复和删除操作成功后无提示，直接更新界面</li>
                <li><strong>确认机制</strong>：只有删除操作需要用户确认，恢复操作直接执行</li>
                <li><strong>错误提示</strong>：只有操作失败时才显示错误信息</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>级联删除功能</h3>
            <p><strong>彻底删除的级联机制</strong>：</p>
            <ul>
                <li><strong>数据库事务</strong>：使用事务确保删除操作的原子性</li>
                <li><strong>级联删除顺序</strong>：先删除MB RTU协议配置，再删除传感器数据，最后删除设备</li>
                <li><strong>关联数据清理</strong>：彻底删除设备时，同时删除所有相关的传感器和协议数据</li>
                <li><strong>详细反馈</strong>：显示删除的设备、传感器、协议配置数量</li>
                <li><strong>错误回滚</strong>：如果任何步骤失败，整个操作会回滚</li>
                <li><strong>数据完整性</strong>：确保数据库中不会留下孤立的关联数据</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>级联复制功能</h3>
            <p><strong>设备级联复制机制</strong>：</p>
            <ul>
                <li><strong>完整复制</strong>：复制设备时同时复制所有传感器和协议配置</li>
                <li><strong>智能命名</strong>：新设备名称为"原名称+复制"，传感器名称保持不变</li>
                <li><strong>ID生成</strong>：自动生成新的设备ID和传感器ID，避免冲突</li>
                <li><strong>容错处理</strong>：单个设备复制失败时跳过，继续复制其他设备</li>
                <li><strong>静默成功</strong>：复制成功时不显示提示，直接更新界面</li>
                <li><strong>失败提示</strong>：只显示复制失败的设备及原因</li>
                <li><strong>数据完整性</strong>：确保复制的设备包含完整的传感器和协议配置</li>
            </ul>
        </div>
    </div>
</body>
</html>
