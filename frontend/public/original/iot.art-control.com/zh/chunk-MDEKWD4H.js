import{a as l}from"./chunk-J7YEUTWU.js";import{g as o,pa as h,ta as m}from"./chunk-3RR6OKG3.js";var E=(()=>{class r{refreshSections(e){this.receiveData.next(e)}constructor(e){this.TOKEN=e,this.themeMap=new Map([["1","app_dark_let_top"],["2","app_default_full"],["3","app_dark_left"],["4","app_dark_top"],["5","app_cyan"],["6","app_blue"],["7","app_purple"],["8","app_red"],["9","app_orange"],["10","app_green"],["11","app_dark_full"]]),this.receiveData=new o(null),this.sendData=this.receiveData.asObservable()}init(){let e=this.TOKEN.GET_STORAGE("userToken")?.appearance,t=this.TOKEN.GET_STORAGE("appearance"),n=t&&this.themeMap.has(t)?t:e&&this.themeMap.has(e)?e:"2";return this.loadTheme(n)}changeTheme(e){this.loadTheme(e,!1,!0).then()}loadTheme(e,t=!0,n=!1){this.refreshSections(e),n&&this.TOKEN.SET_STORAGE("appearance",e),d=e;let a=this.themeMap.has(e)?this.themeMap.get(e):"default";return t&&document.documentElement.classList.add(a),new Promise((s,c)=>{document.getElementById(a)?(document.documentElement.classList.add(a),s(!0)):this.loadCss(`${a}.css`,a).then(i=>{t||document.documentElement.classList.add(a),this.removeUnusedTheme(e),s(i)},i=>c(i))})}loadCss(e,t){return new Promise((n,a)=>{let s=document.createElement("link");s.rel="stylesheet",s.href=e,s.id=t,s.onload=n,s.onerror=a,document.head.append(s)})}removeUnusedTheme(e){this.themeMap.forEach((t,n)=>{if(e!==n){document.documentElement.classList.remove(t);let a=document.getElementById(t);a&&document.head.removeChild(a)}})}static{this.\u0275fac=function(t){return new(t||r)(m(l))}}static{this.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),d="2";export{E as a,d as b};
/**i18n:63feba670192799f8d7bdef17e8d193f0425d52a6089ed55065392b1e1b9606a*/
